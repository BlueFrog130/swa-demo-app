{
	"$schema": "https://github.com/Azure/data-api-builder/releases/download/v1.3.19/dab.draft.schema.json",
	"data-source": {
		"database-type": "cosmosdb_nosql",
		"connection-string": "@env('DATABASE_CONNECTION_STRING')",
		"options": {
			"database": "messages",
			"schema": "staticwebapp.database.schema.gql"
		}
	},
	"runtime": {
		"graphql": {
			"enabled": true,
			"path": "/graphql",
			"allow-introspection": true
		},
		"host": {
			"cors": {
				"origins": ["http://localhost:4280", "https://studio.apollographql.com"],
				"allow-credentials": false
			},
			"authentication": {
				"provider": "StaticWebApps"
			},
			"mode": "production"
		}
	},
	"entities": {
		"Message": {
			"source": "Message",
			"permissions": [
				{
					"actions": ["read"],
					"role": "anonymous"
				}
			],
			"graphql": {
				"enabled": true,
				"type": {
					"singular": "Message",
					"plural": "Messages"
				}
			}
		},
		"SystemProperties": {
			"source": "Message",
			"permissions": [
				{
					"actions": [],
					"role": "anonymous"
				}
			]
		},
		"Body": {
			"source": "Message",
			"permissions": [
				{
					"actions": [],
					"role": "anonymous"
				}
			]
		}
	}
}
